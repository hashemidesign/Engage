{% extends 'base.html' %}
{% block content %}
<div class="row">
	<div class="col-lg-12">
		<h3 class="text-center bold">My Profile</h3>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-default">
			<div class="panel-body">
				<div class="row pad">
					<div class="col-lg-12">
						<div
							style="
							border-radius: 50%;
							border: 2px solid #666;
							box-shadow: 0 0 10px rgba(0,0,0,0.3);
							margin: 0 auto;
							width: 200px; height: 200px; 
							background-position: center; background-repeat: no-repeat; 
							background-size: cover; 
							background-image: url('{{ user.image }}')">
						</div>
					</div>
				</div>
			</div>
			<ul class="list-group">
				<li class="list-group-item">
					<i class="glyphicon glyphicon-user"></i> NAME:
					<strong class="pull-right">{{ user.name }}</strong>
				</li>
				<li class="list-group-item">
					<i class="glyphicon glyphicon-th"></i> Handle:
					<strong class="pull-right"><a href="{{ url_for('profile', username=user.username) }}"><em>@{{ user.username }}</em></a></strong>
				</li>
				<li class="list-group-item">
					<i class="glyphicon glyphicon-calendar"></i> MEMBER SINCE:
					<strong class="pull-right">{{ user.join_date.strftime('%B %d, %Y') }}</strong>
				</li>
				<li class="list-group-item">
					<i class="glyphicon glyphicon-th-list"></i> FOLLOWERS COUNT:
					<strong class="pull-right">{{ followed_by|length }}</strong>
				</li>
				{% if display_follow %}
				<li class="list-group-item">
					<a href="{{ url_for('follow', username=user.username) }}" class="btn btn-block btn-primary">Follow</a>
				</li>
				{% endif %}
			</ul>
		</div>
	</div>

	<div class="col-lg-5">
		<div class="panel panel-default">
			<div class="panel-body">
				<h4><strong>Activity</strong></h4>
				<div role="tabpanel">
					<!-- Nav tabs -->
					<ul class="nav nav-tabs" role="tablist">
						<li role="presentation" class="active">
							<a href="#tweets" aria-controls="tweets" role="tab" data-toggle="tab">Tweets &amp;
								Replies</a>
						</li>
						<li role="presentation">
							<a href="#followings" aria-controls="followings" role="tab"
								data-toggle="tab">Followers</a>
						</li>
					</ul>

					<!-- Tab panes -->
					<div class="tab-content">
						<div role="tabpanel" class="tab-pane active" id="tweets">
							{% for t in user.tweets %}
							<div class="row">
								<div class="col-lg-12">
									<div class="row pad">
										<div class="col-lg-2">
											<img src="{{ user.image }}"
												class="img-circle" style="width: 60px; height: 60px;" />
										</div>
										<div class="col-lg-10">
											<div>
												<strong class="mid">{{ user.name }}</strong>
												<small><a href="{{ url_for('profile', username=user.username) }}"><em>@{{ user.username }}</em></a></small> .
												{{ (current_time - t.date_created)|time_since}}
											</div>
											<div class="pad">
												{{ t.text }}
											</div>
										</div>
									</div>
								</div>
							</div>
							{% endfor %}
						</div>
						<div role="tabpanel" class="tab-pane" id="followings">
							{% for follower in followed_by %}
							<div class="row">
								<div class="col-lg-12">
									<div class="row pad">
										<div class="col-lg-2">
											<img src="{{ follower.image }}"
												class="img-circle" style="width: 60px; height: 60px;" />
										</div>
										<div class="col-lg-10">
											<div>
												<strong class="mid">{{ follower.name }}</strong>
												<small><a href="{{ url_for('profile', username=follower.username) }}"><em>@{{ follower.username }}</em></a></small>
											</div>
											<div class="row pad">
												<hr />
												<div class="col-lg-12">
													<i class="glyphicon glyphicon-th-list"></i> {{ follower.followed_by.all()|length }}
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="col-lg-3">
		<div class="panel panel-default">
			<div class="panel-body">
				<h3>Who To Watch</h3>
			</div>
			<ul class="list-group">
				{% for wtw in who_to_watch %}
				<li class="list-group-item">
					{{ wtw.name }}
					<div>
						<strong><a href="{{ url_for('profile', username=wtw.username) }}">@{{ wtw.username }}</a></strong>
						<span class="pull-right">
							{{ wtw.followed_by.all()|length }} Followers
						</span>
					</div>
				</li>
				{% endfor %}
			</ul>
		</div>
	</div>
</div>
{% endblock %}